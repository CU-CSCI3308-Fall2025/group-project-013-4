<nav class="custom-navbar">
  <div class="nav-container">

    <!-- ✅ Merged Logo: Gradient image + clickable home link -->
    <div class="nav-logo">
      <a href="/" class="logo-link" style="display: flex; align-items: center; text-decoration: none; color: inherit;">
        <div class="logo-icon">
          <img src="/resources/img/logo_w_gradient.svg" alt="Logo" class="logo-img" style="height: 28px; width: auto;" />
        </div>
        <span class="logo-text" style="margin-left: 8px;">WalletWatch</span>
      </a>
    </div>

    <button class="nav-toggle" id="navToggle" type="button" aria-label="Toggle navigation" aria-expanded="false">
      <span class="bar"></span>
      <span class="bar"></span>
      <span class="bar"></span>
    </button>

    <!-- ✅ Navigation Menu -->
    <div class="nav-menu">

      <a href="/" class="nav-item{{#if isHome}} active{{/if}}">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path>
          <polyline points="9 22 9 12 15 12 15 22"></polyline>
        </svg>
        <span>Home</span>
      </a>

      <a href="/addtransaction" class="nav-item{{#if isAddTransaction}} active{{/if}}">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <circle cx="12" cy="12" r="10"></circle>
          <line x1="12" y1="8" x2="12" y2="16"></line>
          <line x1="8" y1="12" x2="16" y2="12"></line>
        </svg>
        <span>Add Transaction</span>
      </a>

      <a href="/budget" class="nav-item{{#if isBudget}} active{{/if}}">
        <svg class="w-6 h-6 text-gray-800 dark:text-white" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="none" viewBox="0 0 24 24">
  <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v15a1 1 0 0 0 1 1h15M8 16l2.5-5.5 3 3L17.273 7 20 9.667"/>
</svg>

        <span>Budget</span>
      </a>

      <a href="/leaderboard" class="nav-item{{#if isLeaderboard}} active{{/if}}">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M6 9H4.5a2.5 2.5 0 0 1 0-5H6"></path>
          <path d="M18 9h1.5a2.5 2.5 0 0 0 0-5H18"></path>
          <path d="M4 22h16"></path>
          <path d="M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22"></path>
          <path d="M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22"></path>
          <path d="M18 2H6v7a6 6 0 0 0 12 0V2Z"></path>
        </svg>
        <span>Leaderboard</span>
      </a>

      <a href="/friends" class="nav-item{{#if isFriends}} active{{/if}}">
        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"/>
          <path d="M16 3.128a4 4 0 0 1 0 7.744"/>
          <path d="M22 21v-2a4 4 0 0 0-3-3.87"/>
          <circle cx="9" cy="7" r="4"/>
        </svg>
        <span>Friends</span>
      </a>

      <!-- ✅ Profile Dropdown -->
      <div class="nav-item dropdown">
        <button class="dropdown-toggle" id="profileDropdown" type="button">
          <div class="nav-right">
            {{#if user}}
            <img 
              src="{{#if user.profile_picture}}{{user.profile_picture}}{{else}}/resources/img/PFP_Default.jpeg{{/if}}" 
              class="nav-profile"
            />
            {{/if}}
          </div>
          <span>Profile</span>
        </button>

        <div class="dropdown-menu" id="profileMenu">
          <a href="/settings" class="dropdown-item">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <circle cx="12" cy="12" r="3"></circle>
              <path d="M12 1v6M12 17v6M4.22 4.22l4.24 4.24M15.54 15.54l4.24 4.24M1 12h6M17 12h6M4.22 19.78l4.24-4.24M15.54 8.46l4.24-4.24"></path>
            </svg>
            <span>Settings</span>
          </a>

          <button class="dropdown-item" id="logoutBtn" type="button">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"></path>
              <polyline points="16 17 21 12 16 7"></polyline>
              <line x1="21" y1="12" x2="9" y2="12"></line>
            </svg>
            <span>Logout</span>
          </button>
        </div>
      </div>

    </div>
  </div>
</nav>
